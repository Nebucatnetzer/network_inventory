use flake
eval "$shellHook"
layout_postgres() {
    export PGDATA="$(direnv_layout_dir)/postgres"
    export PGHOST="$PGDATA"
    if [[ ! -d "$PGDATA" ]]; then
        initdb
        echo -e "listen_addresses = ''\nunix_socket_directories = '$PGHOST'" >> "$PGDATA/postgresql.conf"
        echo "CREATE DATABASE $USER;" | postgres --single -E postgres
    fi
}
layout postgres
